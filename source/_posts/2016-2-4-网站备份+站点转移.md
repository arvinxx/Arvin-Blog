---

urlname: wordPress-blog-backup
title: WordPress建站历史（3）| 网站备份+站点转移
date: 2016-2-4
author: 空谷
header-img: http://pics.arvinx.com/2017-10-03-190735.jpg
tags: 
 - 博客
 - WordPress
---

之前用 WP 搭建完网站之后，在修改主题时改错代码导致网站崩溃。这使得我意识到在本地调试的重要性。于是思考在想如何把其他服务器上的网站转移到本地。
由于最初不是在本地搭建然后再传输到网站上，所以就像是网站与网站间的转移。

#BackWPup插件备份整站
用BackWPup的原因是我在搜备份网站的时候，许多文章都强烈推荐这个插件，用于网站转移，它不但支持数据库的转移，还能完全备份我下载安装的插件，这一点是非常使我心动的。

BackWPup 简介
>BackWPup 是一款超级强大的WordPress备份插件，支持全自动的定时备份，支持备份到FTP空间、邮箱、Dropbox、Amazon S3 ，可以备份数据库、网站的任何文件，该插件还自带中文语言包，超方便。

首先在wordpress中安装该插件,安装完毕之后，我们能在左侧工具栏中看到它显示的组件
![](http://pics.arvinx.com/2017-10-03-190714.jpg)
在这个工具栏中点击「Add new job」，来添加一个新的备份任务
![](http://pics.arvinx.com/2017-10-03-190717.jpg)
![](http://pics.arvinx.com/2017-10-03-190718.jpg)
因为只是为了做转移网站用 备份内容就勾选了数据库、文件和插件。 备份目的地勾选了备份到本地。然后点一下Save Changes，完成一个Jobs的基本设置。
然后在BackWPup工具栏点击Jobs，鼠标靠近job Name会出现四个选项。点击Run Now来执行全站的备份。
![](http://pics.arvinx.com/2017-10-03-190720.jpg)
![](http://pics.arvinx.com/2017-10-03-190723.jpg)
如上图显示，完全备份成功。然后通过FTP连接到服务器，将这个备份包取下来。
#将网站恢复到本地
在此直接跳过本地服务器的运行环境配置。因为在自己家里有一台NAS，并且已经完成了网站的服务器配置，所以就直接在这台NAS上搭建测试网站。
在本地我们先通过「著名的5分钟建站」完成最初的WP创建。然后进入 phpmyAdmin 点开WP的数据库，打开 wp\_users 这张表，复制user\_pass 并保存。（原因是我创建的账户用户名是一样的，后来的数据库内容会覆盖原有的，如果两者的用户名一样，会把把原有的密码覆盖掉，导致最后登不上去，如果设置的用户名不相同，则可以忽略这步）
![](http://pics.arvinx.com/2017-10-03-190724.jpg)
然后把下来的备份包解压缩，在解压出来的文件里面有一个以.sql结尾的文件，这个文件是我们的数据库文件。然后在WP的数据库中，点击上方的「导入」按钮，然后选择数据库文件上传。
![](http://pics.arvinx.com/2017-10-03-190731.jpg)
当导入完毕后，重新点开wp\_users一项，如果你和我一样用了一样的用户名和密码，将之前复制的那串密码粘贴进去，如果设置不一样，可以忽略这步。
![](http://pics.arvinx.com/2017-10-03-190732.jpg)
然后导入完毕数据库后，我们需要在wp\_options这张表中修改siteurl和home的值，改为你需要的本地链接地址，如http://localhost/ 等，在这里我填了我的NAS内网地址。
如果不修改两项，当我们访问内部IP时，会自动跳转到原来的外网域名，就达不到我们的目的了。
![](http://pics.arvinx.com/2017-10-03-190733.jpg)
完成这一步之后算是完成了数据库的转移，然后我们将压缩包直接在本地的WP文件夹下解压，覆盖掉原文件。如果使用LIUNX或者Mac的要注意文件夹权限，得让运行程序有读写权限才行。
然后登陆我们的本地地址，duang地一下就完美复制到本地啦~
![](http://pics.arvinx.com/2017-10-03-190735.jpg)

